@model ShopViewModel
@{
    ViewData["Title"] = "Shop";
}

<div class="container-fluid">
    <div class="row px-xl-5">
        <!-- Shop Sidebar Start -->
        <div class="col-lg-3 col-md-4">
            <!-- Price Start -->
            <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Filter by price</span></h5>
            <div class="bg-light p-4 mb-30">
                <form>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                    
                        <label class="custom-control-label" for="price-all">All Price</label>
                     
                    </div>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                        <input type="checkbox" class="custom-control-input" id="price-1">
                        <input type="hidden" value="0" />
                        <input type="hidden" value="500" />
                        <label class="custom-control-label" for="price-1">$0 - $500</label>
                        <span class="badge border font-weight-normal">150</span>
                    </div>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                        <input type="checkbox" class="custom-control-input" id="price-2">
                        <input type="hidden" value="500" />
                        <input type="hidden" value="1000" />
                        <label class="custom-control-label" for="price-2">$500 - $1000</label>
                        <span class="badge border font-weight-normal">295</span>
                    </div>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                        <input type="checkbox" class="custom-control-input" id="price-3">
                        <input type="hidden" value="1000" />
                        <input type="hidden" value="1500" />
                        <label class="custom-control-label" for="price-3">$1000 - $1500</label>
                        <span class="badge border font-weight-normal">246</span>
                    </div>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                        <input type="checkbox" class="custom-control-input" id="price-4">
                        <input type="hidden" value="1500" />
                        <input type="hidden" value="3000" />
                        <label class="custom-control-label" for="price-4">$1500 - $3000</label>
                        <span class="badge border font-weight-normal">145</span>
                    </div>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between">
                        <input type="checkbox" class="custom-control-input" id="price-5">
                         <input type="hidden" value="3000" />
                        <input type="hidden" value="100000" />
                        <label class="custom-control-label" for="price-5">$3000 - </label>
                        <span class="badge border font-weight-normal">168</span>
                    </div>
                </form>
            </div>
            <!-- Price End -->
            <!-- Color Start -->
            <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Filter by color</span></h5>
            <div class="bg-light p-4 mb-30">
                <form>
                    @{
                        int num1 = 1;
                    }
                    @foreach (Color color in Model.Colors)
                   {
                        <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between">
                            <input value="0" type="hidden"> 
                            <input value="@color.Id" type="checkbox" class="custom-control-input" id="color-@num1">
                            <label class="custom-control-label" for="color-@num1">@color.Name</label>
                            <span class="badge border font-weight-normal">168</span>
                           
                        </div>
                        num1++;
                    }
                    
                </form>
            </div>
            <!-- Color End -->
            <!-- Size Start -->
            <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Filter by size</span></h5>
            <div class="bg-light p-4 mb-30">
                <form>
                    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                        <input type="checkbox" class="custom-control-input" checked id="size-all">
                        <label class="custom-control-label" for="size-all">All Size</label>
                        <span class="badge border font-weight-normal">1000</span>
                    </div>
                    @{
                        int num = 1;
                    }
                    @foreach (Size size in Model.Sizes)
                   {
                         <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
                            <input value="@size.Id" type="hidden"> 
                            <input value="@size.Id" type="checkbox" class="custom-control-input" id="size-@num">
                            <label class="custom-control-label" for="size-@num">@size.SizeName</label>
                            <span class="badge border font-weight-normal">150</span>
                                        
                        </div>
                        num++;                      
                    }
                    
                </form>
            </div>
            <!-- Size End -->
        </div>
        <!-- Shop Sidebar End -->
        <!-- Shop Product Start -->
        <div class="col-lg-9 col-md-8">
            <div class="row pb-3">
                <div class="col-12 pb-1">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <div>
                            <button class="btn btn-sm btn-light"><i class="fa fa-th-large"></i></button>
                            <button class="btn btn-sm btn-light ml-2"><i class="fa fa-bars"></i></button>
                        </div>
                        <div class="ml-2">
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Sorting</button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="#">Latest</a>
                                    <a class="dropdown-item" href="#">Popularity</a>
                                    <a class="dropdown-item" href="#">Best Rating</a>
                                </div>
                            </div>
                            <div class="btn-group ml-2">
                                <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Showing</button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="#">10</a>
                                    <a class="dropdown-item" href="#">20</a>
                                    <a class="dropdown-item" href="#">30</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
             
               
                <div class="row col-12" id="div2">
                   @await Html.PartialAsync("_ProductPartialView", Model.Clothings.OrderByDescending(c=>c.Id));
               </div>
                
            </div>
        </div>
        <!-- Shop Product End -->
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
<script type="text/javascript">
   
    var radioInputs = document.querySelectorAll(".custom-control-input");
    var inputRadioValue = '';
    radioInputs.forEach(function (input) {
        input.addEventListener('click', function (e) {

            if (e.target.previousElementSibling != null && e.target.previousElementSibling.value == 0){
                  //alert("color")
                  inputRadioValue = input.value;
                  var szId = 0;
                  var data = inputRadioValue;
                  $.ajax({
                      type: "POST",
                      url: "/Shop/shop1/",
                      data: { colorId: data, sizeId:szId },
                      dataType: "html",
                      success: function (data) {
                          document.getElementById('div2').innerHTML = data;
                                          
                      },
                      error: function () {
                           alert("Error occured!!")                   
                      }

                  });
                              
              }
            else if (e.target.previousElementSibling != null && e.target.previousElementSibling.value != 0) {
                  //alert("size")
                  inputRadioValue = e.target.previousElementSibling.value; 
                  var clrId = 0;
                  var data = inputRadioValue;
                  $.ajax({
                      type: "POST",
                      url: "/Shop/shop1/",
                      data: { colorId: clrId, sizeId:data },
                      dataType: "html",
                      success: function (data) {
                          document.getElementById('div2').innerHTML = data;
                                          
                      },
                      error: function () {
                           alert("Error occured!!")                   
                      }

                  });
                 
            }
            else{
                //alert('price')
                var minPrice = e.target.nextElementSibling.value;
                var maxPrice = e.target.nextElementSibling.nextElementSibling.value;
                var clrId = 0;
                var szId = 0;
                $.ajax({
                    type: "POST",
                    url: "/Shop/shop1/",
                    data: { colorId: clrId, sizeId:szId, minPrice: minPrice, maxPrice:maxPrice },
                    dataType: "html",
                    success: function (data) {
                        document.getElementById('div2').innerHTML = data;

                    },
                    error: function () {
                        alert("Error occured!!")
                    }

                });
            }
              
             
           

        })
    })
 
 </script>












                


